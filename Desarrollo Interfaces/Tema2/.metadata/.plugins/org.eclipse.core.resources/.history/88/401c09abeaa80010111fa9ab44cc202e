package LibrosBiblio;

import java.sql.Connection;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;
import java.util.Scanner;

public class AppCrudBiblio {
	static Connection conexionCrud = null;

	// Método para insertar un libro
	public static void borrarLibro(String libro) {
		//construimos la sentencia SQL e insertamos el libro
		
		
	}

	public static void consultarLibro(double precio) {
		
	}
	public static void main(String[] args) {
		Statement st = null;
		int opcion = 0;
		Scanner sc = null;
		AccesoDatos ad = null;
		double precioUsuario = 0.0;
		String sql3 = "select titulo,autor,precio from libros where precio>=";
		ResultSet rs = null;

		try {
			ad = new AccesoDatos("biblios");
			conexionCrud = ad.getConnection();
			st = conexionCrud.createStatement();
			sc = new Scanner(System.in);
			System.out.println("Introduzca la opción");
			System.out.println("1. Insertar");
			System.out.println("2. Borrar");
			System.out.println("3. Actualizar precio");
			System.out.println("4. Consultar por precio");
			opcion = sc.nextInt();
			while (opcion != 0) {
				switch (opcion) {
				case 1:
					break;
				case 2:
					//pedir los datos del libro
					//construimos un objeto libro
					//llamamos al método borrarLibro
					break;
				case 3:
					System.out.println("Introduzca precio a consultar");
					precioUsuario = sc.nextDouble();
					sql3 += precioUsuario;
					rs = st.executeQuery(sql3);
					while (rs.next()) {
						Libro libro = new Libro(rs.getString(1), rs.getString(2), rs.getDouble(3));
						System.out.println(libro.toString());
					}
					rs.close();
					break;
				case 4:
					break;
				case 0:
					System.out.println("Saliendo...");
					break;
				default:
					System.out.println("Opción no válida");
					break;
				}
				System.out.println("Introduzca la opción");
				System.out.println("1. Insertar");
				System.out.println("2. Borrar");
				System.out.println("3. Actualizar precio");
				System.out.println("4. Consultar por precio");
				opcion = sc.nextInt();
			}
		} catch (Exception e) {
			e.printStackTrace();
		} finally {
			try {
				st.close();
			} catch (SQLException e) {
				e.printStackTrace();
			}
			try {
				conexionCrud.close();
			} catch (SQLException e) {
				e.printStackTrace();
			}
		}
	}
}